{% extends 'core/base.html' %}
{% load static %}

{% block title %}Food{% endblock %}

{% block maincontent %}<!-- Overlay -->
<div id="overlay" style="
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.3);
  z-index: 1040;
"></div>

<!-- Hamburger Icon (RIGHT SIDE) -->
<div id="hamburger" style="
  position: fixed;
  top: 30px;
  right: 35px; /* changed from left: 20px */
  z-index: 1100;
  cursor: pointer;
  width: 36px;
  height: 28px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
">
  <span style="
    height: 4px;
    background-color: #FF6F00;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  "></span>
  <span style="
    height: 4px;
    background-color: #FF6F00;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  "></span>
  <span style="
    height: 4px;
    background-color: #FF6F00;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  "></span>
</div>

<!-- Sidebar (slides in from RIGHT) -->
<div id="sidebar" style="
  position: fixed;
  top: 0;
  right: -280px; /* changed from left: -280px */
  width: 280px;
  height: 100%;
  background-color: #FFF3E0;
  color: #E65100;
  padding: 60px 20px 20px 20px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 500;
  transition: right 0.3s ease; /* changed from left */
  z-index: 1050;
  border-top-left-radius: 12px;
  border-bottom-left-radius: 12px;
  overflow-y: auto;
  box-shadow: -2px 0 12px rgba(0,0,0,0.08);
">

  <!-- Close Button -->
  <button id="closeBtn" aria-label="Close sidebar" style="
    position: absolute;
    top: 15px;
    left: 15px; /* changed from right */
    background: transparent;
    border: none;
    font-size: 28px;
    color: #FF6F00;
    cursor: pointer;
    font-weight: bold;
    transition: color 0.3s ease;
  " onmouseover="this.style.color='#E65100'" onmouseout="this.style.color='#FF6F00'">
    &times;
  </button>

  <h2 style="margin-bottom: 25px; color: #FF6F00; font-weight: 700; font-size: 24px;">
    Filter by Category
  </h2>

  <nav style="display: flex; flex-direction: column; gap: 12px;">
    <a href="/food/" style="...">All</a>

    <!-- Example categories -->
    <a href="?category=Indian" style="...">Indian</a>
    <a href="?category=Fast Food" style="...">Fast Food</a>
    <a href="?category=Dessert" style="...">Dessert</a>
    <a href="?category=Italian" style="...">Italian</a>
    <a href="?category=Mexican" style="...">Mexican</a>
    <a href="?category=South Indian" style="...">South Indian</a>
    <a href="?category=Chinese" style="...">Chinese </a>
  </nav>
</div>  

<!-- JavaScript -->
<script>
  const sidebar = document.getElementById('sidebar');
  const hamburger = document.getElementById('hamburger');
  const closeBtn = document.getElementById('closeBtn');
  const overlay = document.getElementById('overlay');

  function openSidebar() {
    sidebar.style.right = '0'; // changed from left
    overlay.style.display = 'block';
  }

  function closeSidebar() {
    sidebar.style.right = '-280px'; // changed from left
    overlay.style.display = 'none';
  }

  hamburger.onclick = openSidebar;
  closeBtn.onclick = closeSidebar;
  overlay.onclick = closeSidebar;

  window.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && sidebar.style.right === '0px') {
      closeSidebar();
    }
  });
</script>


<section class="dish-section">
   <div class="head" style="
        width: 100%;
        padding: 10px 20px;
        margin-bottom: 20px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.8;
        text-align: center;
        color: #2c2c2c;
    ">
    <p style="font-size: 28px; font-weight: bold; color: #e65100;">
        Experience the Essence of India on Every Plate
    </p>
    <p style="font-size: 18px;">
        From the bustling streets of Delhi to the peaceful corners of Kerala,
        Our dishes are crafted to serve not just food, but moments of joy.
    </p>
    <br>
</div>
{% if messages %}
    <ul style="color:rgba(254, 0, 0, 0.671)">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

<div style="text-align: center; margin-bottom: 30px;">
  <h3 style="color:#e65100;">Filter by Category:</h3>
  <div style="margin-top: 10px;">
    <a href="{% url 'food' %}" 
       style="{% if not selected_category %}font-weight: bold;{% endif %} margin: 0 10px;">All</a>

    {% for cat in categories %}
      <a href="?category={{ cat }}" 
         style="{% if selected_category == cat %}font-weight: bold;{% endif %} margin: 0 10px;">
         {{ cat }}
      </a>
    {% endfor %}
  </div>
</div>





<h1 class="popular-heading"> Popular Dishes</h1>

<!-- Search form submits GET request to 'food' URL with q param -->
<form method="GET" action="{% url 'food' %}" id="searchContainer" style="margin-bottom: 30px; text-align:center;">
    <input type="text" name="q" id="searchInput" placeholder="Search for your favorite dish..." 
           value="{{ request.GET.q|default:'' }}" 
           style="padding: 8px 12px; width: 250px; border: 1px solid #ccc; border-radius: 5px;">
    <button type="submit" id="searchBtn" style="
        padding: 8px 16px; 
        background-color: #e65100; 
        color: white; 
        border: none; 
        border-radius: 5px; 
        cursor: pointer;">
        Search
    </button>
</form>

<div class="dishes-grid" style="
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    max-width: 1200px;
    margin: 0 auto;
">

    {% for dish in dishes %}
        <div class="dish-card" style="border: 1px solid #ddd; border-radius: 10px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            
            <img src="{{ dish.image.url }}" alt="{{ dish.name }}" style="width: 100%; height: 180px; object-fit: cover; border-radius: 8px;">
            <h3 style="font-size: 1.5rem; margin-top: 12px; color: #2c2c2c;">{{ dish.name }}</h3>
            <p style="color: #666; margin-top: 6px;">{{ dish.description }}</p>
            <p style="font-weight: bold; color: #e65100; margin-top: 6px;">Price: â‚¹{{ dish.price }}</p>
            <form method="POST" action="{% url 'add_to_cart' dish.id %}" style="margin-top: 12px;">
                {% csrf_token %}
                <input type="hidden" name="item_id" value="{{ dish.id }}">
                <button type="submit" style="
                    background-color: #e65100; 
                    color: white; 
                    padding: 10px 16px; 
                    border: none; 
                    border-radius: 6px; 
                    cursor: pointer;
                    width: 100%;
                    font-weight: bold;
                ">Add to Cart</button>
            </form>
        </div>
    {% empty %}
        <p style="text-align:center; font-size: 18px; color: #999;">No dishes found.</p>
    {% endfor %}

</div>



<div class="dishes-grid" style="background-color: #bcbbbb; margin-top: 130px; padding: 30px; border-radius: 40px; margin-left: 20px; margin-right: 20px;">
<!-- Dish 1 -->
<div id="dish1" class="dish-card">
    <img src="{% static 'core/images/popularpaneer.jpg' %}" alt="Palak Paneer">
    <h3 class="text-2xl font-semibold text-gray-800">Palak Paneer</h3>
    <p class="text-gray-600 mt-2">The cuisine was authentic and full of flavor.</p>
    <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>
</div>

<!-- Dish 2 -->
<div id="dish2" class="dish-card">
    <img src="{% static 'core/images/popularsalmon.jpg' %}" alt="Khamand Dhokla">
    <h3 class="text-2xl font-semibold text-gray-800">Khamand Dhokla</h3>
    <p class="text-gray-600 mt-2">Meal tasted freshly cooked and satisfying.</p>
   <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>

</div>

<!-- Dish 3 -->
<div id="dish3" class="dish-card">
    <img src="{% static 'core/images/popularchicken.jpg' %}" alt="Idli Sambar">
    <h3 class="text-2xl font-semibold text-gray-800">Idli Sambar</h3>
    <p class="text-gray-600 mt-2">Dish was crafted with great care.</p>
    <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>

</div>

<!-- Dish 4 -->
<div id="dish4" class="dish-card">
    <img src="https://tse2.mm.bing.net/th/id/OIP.xnOdHsT-Ny1NUwz1uv5r-AHaFj" alt="Masala Alu">
    <h3 class="text-2xl font-semibold text-gray-800">Masala Alu</h3>
    <p class="text-gray-600 mt-2">The plate arrived hot, colorful, and inviting.</p>
     <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>

</div>

<!-- Dish 5 -->
<div id="dish5" class="dish-card">
    <img src="https://images.pexels.com/photos/1633578/pexels-photo-1633578.jpeg" alt="Barger">
    <h3 class="text-2xl font-semibold text-gray-800">Barger</h3>
    <p class="text-gray-600 mt-2">It felt like a royal feast of spices.</p>
     <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>

</div>

<!-- Dish 6 -->
<div id="dish6" class="dish-card">
    <img src="https://images.pexels.com/photos/46239/salmon-dish-food-meal-46239.jpeg" alt="Stef Fist">
    <h3 class="text-2xl font-semibold text-gray-800">Stef Fist</h3>
    <p class="text-gray-600 mt-2">A delightful spread with vibrant, bold flavors.</p>
     <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>

</div>

<!-- Dish 7 -->
<div id="dish7" class="dish-card">
    <img src="https://images.pexels.com/photos/1860208/pexels-photo-1860208.jpeg" alt="Veggies">
    <h3 class="text-2xl font-semibold text-gray-800">Veggies</h3>
    <p class="text-gray-600 mt-2">Serving was generous and perfectly seasoned.</p>
    <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>

</div>

<!-- Dish 8 -->
<div id="dish8" class="dish-card">
    <img src="https://th.bing.com/th/id/OIP.tk76-hYi8PgcmM64KWXGMwHaGD" alt="Veg Momos">
    <h3 class="text-2xl font-semibold text-gray-800">Veg Momos</h3>
    <p class="text-gray-600 mt-2">Steamed dumplings filled with spiced veggies.</p>
     <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>
</div>

<!-- Dish 9 -->
<div id="dish9" class="dish-card">
    <img src="https://th.bing.com/th/id/OIP.fanZPy9rtueJs2yW6jQDqgHaHa" alt="Hakka Noodles">
    <h3 class="text-2xl font-semibold text-gray-800">Hakka Noodles</h3>
    <p class="text-gray-600 mt-2">Rich chocolate cake with silky ganache topping.</p>
      <a href="{% url 'customer_details' %}" class="inline-block bg-orange-500 text-white mt-4 px-4 py-2 rounded-full hover:bg-orange-600">Order Now</a>

</div>
</div>
</section>
{% endblock %}
